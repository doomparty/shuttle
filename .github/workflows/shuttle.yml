- name: Fetch latest shuttle-runtime version with debug
  id: latest
  run: |
    echo "Fetching crate info from crates.io..."
    response=$(curl -s https://crates.io/api/v1/crates/shuttle-runtime)
    echo "Raw response from crates.io:"
    echo "$response"
    version=$(echo "$response" | jq -r '.crate.newest_version')
    echo "Parsed version: $version"
    if [ -z "$version" ] || [ "$version" = "null" ]; then
      echo "❌ Failed to fetch shuttle-runtime version"
      exit 1
    fi
    echo "✅ Latest shuttle-runtime version: $version"
    echo "version=$version" >> "$GITHUB_OUTPUT"
